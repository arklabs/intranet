(function(a){function i(f){if(f.attr("title")||typeof f.attr("original-title")!="string")f.attr("original-title",f.attr("title")||"").removeAttr("title")}a.fn.tipsy=function(f){f=a.extend({},a.fn.tipsy.defaults,f);return this.each(function(){i(a(this));var b=a.fn.tipsy.elementOptions(this,f),j=null;a(this).hover(function(){var e=this;j=setTimeout(function(){a.data(e,"cancel.tipsy",true);var c=a.data(e,"active.tipsy");if(!c){c=a('<div class="tipsy"><div class="tipsy-inner"/></div>');c.css({position:"absolute", zIndex:1E5});a.data(e,"active.tipsy",c)}i(a(e));var d;if(typeof b.title=="string")d=a(e).attr(b.title=="title"?"original-title":b.title);else if(typeof b.title=="function")d=b.title.call(e);c.find(".tipsy-inner")[b.html?"html":"text"](d||b.fallback);d=a.extend({},a(e).offset(),{width:e.offsetWidth,height:e.offsetHeight});c.get(0).className="tipsy";c.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var g=c[0].offsetWidth,h=c[0].offsetHeight;switch((typeof b.gravity== "function"?b.gravity.call(e):b.gravity).charAt(0)){case "n":c.css({top:d.top+d.height,left:d.left+d.width/2-g/2}).addClass("tipsy-north");break;case "s":c.css({top:d.top-h,left:d.left+d.width/2-g/2}).addClass("tipsy-south");break;case "e":c.css({top:d.top+d.height/2-h/2,left:d.left-g}).addClass("tipsy-east");break;case "w":c.css({top:d.top+d.height/2-h/2,left:d.left+d.width}).addClass("tipsy-west");break}b.fade?c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:b.opacity}): c.css({visibility:"visible",opacity:b.opacity})},b.delayIn)},function(){a.data(this,"cancel.tipsy",false);var e=this;clearTimeout(j);setTimeout(function(){if(!a.data(this,"cancel.tipsy")){var c=a.data(e,"active.tipsy");if(b.fade)c.stop().fadeOut(function(){a(this).remove()});else c&&c.remove()}},b.delayOut)})})};a.fn.tipsy.elementOptions=function(f,b){return a.metadata?a.extend({},b,a(f).metadata()):b};a.fn.tipsy.defaults={delayIn:0,delayOut:100,fade:false,fallback:"",gravity:"n",html:false,opacity:0.8, title:"title"};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}})(jQuery);