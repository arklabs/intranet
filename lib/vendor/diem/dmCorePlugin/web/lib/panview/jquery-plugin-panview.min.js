$.fn.panView=function(d,e){return this.each(function(){function o(a){this.e=a?a:window.event;this.source=a.target?a.target:a.srcElement;this.x=this.e.pageX?this.e.pageX:this.e.clientX;this.y=this.e.pageY?this.e.pageY:this.e.clientY;if(window.event){this.x=document.body.scrollLeft?this.x+document.body.scrollLeft:this.x;this.y=document.body.scrollTop?this.y+document.body.scrollTop:this.y}}function p(a){this.width=a.clientWidth;this.height=a.clientHeight;this.minX=d-this.width;this.minY=e-this.height; this.maxY=this.maxX=0}var i="static",j="static",f=this.id+"Pan",g=this.id+"PanMask",h="up",k=0,l=0,m=0,n=0,q=this;$(this).css("display","block");if(d=="auto"){d=this.clientWidth<document.body.clientWidth?this.clientWidth:document.body.clientWidth;i="dynamic"}if(e=="auto"){e=this.clientHeight<document.body.clientHeight?this.clientHeight:document.body.clientHeight;j="dynamic"}var b=new p(q);$(this).wrap('<div id="'+f+'" style="width:'+d+"px; height:"+e+'px; overflow:hidden; position: relative;"><div id="'+ g+'" style="left:0px;top:0px;position:relative;"></div></div>');$(document).resize(function(){if(i=="dynamic"){d=this.clientWidth<document.body.clientWidth?this.clientWidth:document.body.clientWidth;$("div#"+f).css("width",d+"px")}if(j=="dynamic"){e=this.clientHeight<document.body.clientHeight?this.clientHeight:document.body.clientHeight;$("div#"+f).css("height",e+"px")}if(i=="dynamic"||j=="dynamic"){b=null;b=new p(q);n=m=l=k=0;$("div#"+g).css("left","0px").css("top","0px")}});$("div#"+f).mousedown(function(a){h= "down";a=new o(a);k=a.x;l=a.y;$(this).css("cursor","move");return false});$("div#"+f).mouseup(function(){h="up";m=parseInt($("div#"+g).get(0).style.left);n=parseInt($("div#"+g).get(0).style.top);$(this).css("cursor","default")});$(document.body).mousemove(function(a){a=new o(a);var c=$("div#"+f).get(0);if(a.x<c.offsetLeft||a.x>c.offsetLeft+d||a.y<c.offsetTop||a.y>c.offsetTop+e)h="up";if(h=="down"){c=m-(k-a.x);a=n-(l-a.y);if(c<b.minX)c=b.minX;else if(c>b.maxX)c=b.maxX;if(a<b.minY)a=b.minY;else if(a> b.maxY)a=b.maxY;$("div#"+g).css("left",c+"px").css("top",a+"px")}return false})})};